function send(client, raw_message):
	encoded = raw_message  + "\r\n"
	if client.output_buffer.size + encoded.size > MAX_OUTPUT_BUFFER
		disconnect(client)
		return
	client.output_buffer.append(encoded)
	eventloop.enable_write(client.socket)

function broadcast(channel, sender, message):
	for member in channel.members:
		if member is not sender:
			send(member, message)